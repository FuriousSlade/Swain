{% extends "base.html" %}
{% block title %}{{ article.title|striptags }}{% endblock %}

{% block meta_tags_in_head %}
{{ super() }}
{% if article.tags or article.category or article.keywords %}
<meta name="keywords" content="{{ [article.tags|join(', '), article.category, article.keywords]|join(', ') }}" />
{% endif %}
{% endblock meta_tags_in_head %}

{% block content %}
<section id="content" class="body fadeInUp">
  <article>
    <div class="panel panel-default">
      <div class="panel-body">
        <header>
          <h1 class="entry-title">
            <a href="/{{ article.url }}" rel="bookmark"
               title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a></h1>
        </header>
        <hr/>
        <div class="entry-content">
          {{ article.content }}
        </div><!-- /.entry-content -->
        {% if DISQUS_SITENAME and SITEURL and article.status != "draft" %}
        <div class="comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
              var disqus_shortname = '{{ DISQUS_SITENAME }}';
              var disqus_config = function () {
                  this.page.url = '{{ SITEURL }}/{{ article.url }}';
                  this.page.identifier = '/{{ article.url }}';
                  this.page.title = '{{ article.title|striptags }}';
              };
              (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
                  var d = document, s = d.createElement('script');
                  s.src = '//' + disqus_shortname + '.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
                  s.setAttribute('data-timestamp', +new Date());
                  (d.head || d.body).appendChild(s);
              })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </div>
        {% endif %}
    </div>
  </div>      
    {% if article.related_posts %}
    <div class="panel panel-default">
      <div class="panel-heading">Related posts</div>
      <div class="panel-body">
        <ul class="list-unstyled">
        {% for related_post in article.related_posts %}
        <li><a href="/{{ related_post.url }}">{{ related_post.title }}</a></li>
        {% endfor %}
        </ul>
      </div>
    </div>
    {% endif %}

    {% if DUOSHUO_SHORTNAME %}
    <div class="panel panel-default">
      <div class="panel-body">
        {% include '_includes/duoshuo.html' %}
      </div>
    </div>
    {% endif %}

  </article>
</section>
{% endblock %}

{% block sidebar_left_div %}
<div class="col-md-2 hidden-xs hidden-sm" id="sidebar_left">
  {% include '_includes/toc.html' %}
</div>
{% endblock %}

{% block sidebar_right %}
      {% include '_includes/article_infos.html' %}
{% endblock%}

{% block script %}
<script type="text/javascript">
    function setTocClass() {
        var f = document.getElementById("toc");
        if (f != null) {
          f.classList.add("art-toc");
          f.classList.add("fadeInLeft");
          f.style.opacity = 1;
        };
    };
    window.onload = setTocClass();
</script>
{% endblock %}